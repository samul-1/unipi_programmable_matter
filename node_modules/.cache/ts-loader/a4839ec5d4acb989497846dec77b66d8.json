{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1644313246363},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgc3RvcmUgZnJvbSAnLi9zdG9yZSc7CnZhciBERUxBWSA9IDUwMDsKCnZhciBnZXRBY3RpdmVQYXJ0aWNsZXMgPSBmdW5jdGlvbiBnZXRBY3RpdmVQYXJ0aWNsZXMoKSB7CiAgcmV0dXJuIHN0b3JlLnN0YXRlLnBhcnRpY2xlczsKfTsKCnZhciBnZXROZXh0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSkgewogIHZhciBwYXJ0aWNsZVBvaW50ID0gc3RvcmUuZ2V0dGVycy5nZXRQb2ludChwYXJ0aWNsZS5jdXJyZW50Um93LCBwYXJ0aWNsZS5jdXJyZW50Q29sKTsKICB2YXIgZnJlZU5laWdoYm9ySW50ZXJ2YWwgPSBzdG9yZS5nZXR0ZXJzLmdldEZyZWVOZWlnaGJvcnNJbnRlcnZhbChwYXJ0aWNsZVBvaW50KTsKCiAgaWYgKGZyZWVOZWlnaGJvckludGVydmFsLmxlbmd0aCA+IDIgJiYgZnJlZU5laWdoYm9ySW50ZXJ2YWwubGVuZ3RoIDwgNikgewogICAgdmFyIHRhcmdldEluZGV4ID0gTWF0aC5mbG9vcihmcmVlTmVpZ2hib3JJbnRlcnZhbC5sZW5ndGggLyAyKTsKICAgIHJldHVybiBmcmVlTmVpZ2hib3JJbnRlcnZhbFt0YXJnZXRJbmRleF07CiAgfQoKICByZXR1cm4gbnVsbDsKfTsKCnZhciBtYWtlTW92ZSA9IGZ1bmN0aW9uIG1ha2VNb3ZlKHBhcnRpY2xlKSB7CiAgdmFyIHRhcmdldCA9IHN0b3JlLmdldHRlcnMuZ2V0UGFydGljbGVUYXJnZXQocGFydGljbGUuaWQpOwoKICBpZiAodGFyZ2V0ICYmIHN0b3JlLmdldHRlcnMuaXNHcmlkUG9pbnRGcmVlKHRhcmdldCkpIHsKICAgIHN0b3JlLmNvbW1pdCgnbW92ZVBhcnRpY2xlVG9UYXJnZXQnLCB7CiAgICAgIGlkOiBwYXJ0aWNsZS5pZAogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBfdGFyZ2V0ID0gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSk7CgogICAgaWYgKF90YXJnZXQpIHsKICAgICAgc3RvcmUuY29tbWl0KCd1cGRhdGVQYXJ0aWNsZVRhcmdldCcsIHsKICAgICAgICBpZDogcGFydGljbGUuaWQsCiAgICAgICAgdGFyZ2V0OiBfdGFyZ2V0CiAgICAgIH0pOwogICAgfQogIH0KfTsKCmV4cG9ydCB2YXIgcnVuID0gZnVuY3Rpb24gcnVuKCkgewogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb24KICBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICB2YXIgYWN0aXZlUGFydGljbGVzID0gZ2V0QWN0aXZlUGFydGljbGVzKCk7CiAgICBhY3RpdmVQYXJ0aWNsZXMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICByZXR1cm4gbWFrZU1vdmUocCk7CiAgICB9KTsKICB9LCBERUxBWSk7Cn07"},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":";;;;AACA,OAAO,KAAP,MAAkB,SAAlB;AAEA,IAAM,KAAK,GAAG,GAAd;;AAEA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB;AAAA,SAAmB,KAAK,CAAC,KAAN,CAAY,SAA/B;AAAA,CAA3B;;AAEA,IAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,QAAD,EAA0C;AAC9D,MAAM,aAAa,GAAG,KAAK,CAAC,OAAN,CAAc,QAAd,CACpB,QAAQ,CAAC,UADW,EAEpB,QAAQ,CAAC,UAFW,CAAtB;AAIA,MAAM,oBAAoB,GAAG,KAAK,CAAC,OAAN,CAAc,wBAAd,CAC3B,aAD2B,CAA7B;;AAIA,MACE,oBAAoB,CAAC,MAArB,GAA8B,CAA9B,IACA,oBAAoB,CAAC,MAArB,GAA8B,CAFhC,EAGE;AACA,QAAM,WAAW,GAAG,IAAI,CAAC,KAAL,CAAW,oBAAoB,CAAC,MAArB,GAA8B,CAAzC,CAApB;AACA,WAAO,oBAAoB,CAAC,WAAD,CAA3B;AACD;;AAED,SAAO,IAAP;AACD,CAlBD;;AAoBA,IAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,QAAD,EAA8B;AAC7C,MAAM,MAAM,GAAG,KAAK,CAAC,OAAN,CAAc,iBAAd,CAAgC,QAAQ,CAAC,EAAzC,CAAf;;AACA,MAAI,MAAM,IAAI,KAAK,CAAC,OAAN,CAAc,eAAd,CAA8B,MAA9B,CAAd,EAAqD;AACnD,IAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC;AACnC,MAAA,EAAE,EAAE,QAAQ,CAAC;AADsB,KAArC;AAGD,GAJD,MAIO;AACL,QAAM,OAAM,GAAG,aAAa,CAAC,QAAD,CAA5B;;AACA,QAAI,OAAJ,EAAY;AACV,MAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC;AACnC,QAAA,EAAE,EAAE,QAAQ,CAAC,EADsB;AAEnC,QAAA,MAAM,EAAN;AAFmC,OAArC;AAID;AACF;AACF,CAfD;;AAiBA,OAAO,IAAM,GAAG,GAAG,SAAN,GAAM,GAAW;AAC5B;AACA,EAAA,WAAW,CAAC,YAAK;AACf,QAAM,eAAe,GAAG,kBAAkB,EAA1C;AAEA,IAAA,eAAe,CAAC,OAAhB,CAAwB,UAAC,CAAD;AAAA,aAAO,QAAQ,CAAC,CAAD,CAAf;AAAA,KAAxB;AACD,GAJU,EAIR,KAJQ,CAAX;AAKD,CAPM","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\n\nconst DELAY = 500;\n\nconst getActiveParticles = (): IParticle[] => store.state.particles;\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const freeNeighborInterval = store.getters.getFreeNeighborsInterval(\n    particlePoint\n  ) as GridPoint[];\n\n  if (\n    freeNeighborInterval.length > 2 &&\n    freeNeighborInterval.length < 6\n  ) {\n    const targetIndex = Math.floor(freeNeighborInterval.length / 2);\n    return freeNeighborInterval[targetIndex];\n  }\n\n  return null;\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nexport const run = (): void => {\n  // eslint-disable-next-line no-constant-condition\n  setInterval(() => {\n    const activeParticles = getActiveParticles();\n\n    activeParticles.forEach((p) => makeMove(p));\n  }, DELAY);\n};\n"],"sourceRoot":""}]}