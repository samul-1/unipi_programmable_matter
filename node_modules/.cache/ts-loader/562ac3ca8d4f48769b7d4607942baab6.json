{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1644779213989},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NhbXVlbGUvRGVza3RvcC92dWUvcHJvZ3JhbW1hYmxlX21hdHRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvc2FtdWVsZS9EZXNrdG9wL3Z1ZS9wcm9ncmFtbWFibGVfbWF0dGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgeyBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyIH0gZnJvbSAnLi9zdGF0cyc7CmltcG9ydCB7IGdldFJhbmRvbVJvdywgZ2V0UmFuZG9tQ29sLCBnZXRSYW5kb21Cb29sLCBncmlkUG9pbnRUb0dyaWRDb29yZGluYXRlcyB9IGZyb20gJy4vdXRpbHMnOwppbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJzsKdmFyIERFTEFZID0gMTAwOyAvLyBwdXNoZXMgcGFydGljbGVzIGZvciBhIG5ldyBydW4gdG8gdGhlIHN0b3JlCgp2YXIgY3JlYXRlUGFydGljbGVzID0gZnVuY3Rpb24gY3JlYXRlUGFydGljbGVzKCkgewogIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYS1zZW1pCiAgX3RvQ29uc3VtYWJsZUFycmF5KEFycmF5KHN0b3JlLnN0YXRlLm51bVBhcnRpY2xlcykpLmZvckVhY2goZnVuY3Rpb24gKF9pKSB7CiAgICBzdG9yZS5jb21taXQoJ3B1c2hQYXJ0aWNsZScsIHsKICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICBjdXJyZW50Um93OiBnZXRSYW5kb21Sb3coKSwKICAgICAgY3VycmVudENvbDogZ2V0UmFuZG9tQ29sKCksCiAgICAgIGlzT2JzdGFjbGU6IGdldFJhbmRvbUJvb2woMCkKICAgIH0pOwogIH0pOwp9OwoKdmFyIGdldEFjdGl2ZVBhcnRpY2xlcyA9IGZ1bmN0aW9uIGdldEFjdGl2ZVBhcnRpY2xlcygpIHsKICByZXR1cm4gc3RvcmUuZ2V0dGVycy5ub25PYnN0YWNsZVBhcnRpY2xlczsKfTsgLy8gc2FtcGxlU2l6ZSgKLy8gICBzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzLAovLyAgIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChzdG9yZS5zdGF0ZS5wYXJ0aWNsZXMubGVuZ3RoIC0gMSkgKyAxKQovLyApOwoKCnZhciBnZXROZXh0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSkgewogIHZhciBwYXJ0aWNsZVBvaW50ID0gc3RvcmUuZ2V0dGVycy5nZXRQb2ludChwYXJ0aWNsZS5jdXJyZW50Um93LCBwYXJ0aWNsZS5jdXJyZW50Q29sKTsKCiAgdmFyIF9zdG9yZSRnZXR0ZXJzJGdldEZyZSA9IHN0b3JlLmdldHRlcnMuZ2V0RnJlZU5laWdoYm9yc0ludGVydmFsKHBhcnRpY2xlUG9pbnQpLAogICAgICBmcmVlTmVpZ2hib3JJbnRlcnZhbCA9IF9zdG9yZSRnZXR0ZXJzJGdldEZyZS5mcmVlTmVpZ2hib3JJbnRlcnZhbCwKICAgICAgb2JzdGFjbGUgPSBfc3RvcmUkZ2V0dGVycyRnZXRGcmUub2JzdGFjbGU7CgogIHJldHVybiBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwoZnJlZU5laWdoYm9ySW50ZXJ2YWwsIG9ic3RhY2xlKTsKfTsKCnZhciBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwgPSBmdW5jdGlvbiBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwoaW50ZXJ2YWwsIHRoZXJlSXNPYnN0YWNsZSkgewogIHZhciBhbGdvcml0aG0gPSBzdG9yZS5zdGF0ZS5hbGdvcml0aG07CiAgdmFyIHRhcmdldEluZGV4OwoKICBpZiAoYWxnb3JpdGhtID09PSAnYycpIHsKICAgIC8vIGFsZ29yaXRobSAnYycgYmVjb21lcyAnYicgaWYgdGhlcmUgaXMgYW4gYWRqYWNlbnQgb2JzdGFjbGUsICdhJyBvdGhlcndpc2UKICAgIGFsZ29yaXRobSA9IHRoZXJlSXNPYnN0YWNsZSA/ICdiJyA6ICdhJzsKICB9CgogIGlmIChpbnRlcnZhbC5sZW5ndGggPD0gMiB8fCBpbnRlcnZhbC5sZW5ndGggPT09IDYpIHsKICAgIC8vIG5vIGFsZ29yaXRobSBtYWtlcyBhIG1vdmUgb24gYW4gaW50ZXJ2YWwgMSwgMiwgb3IgNiBjZWxscyBsb25nCiAgICByZXR1cm4gbnVsbDsKICB9CgogIGlmIChpbnRlcnZhbC5sZW5ndGggPT09IDUgJiYgYWxnb3JpdGhtID09PSAnYicpIHsKICAgIC8vIGFsZ29yaXRobSAnYicgc2VsZWN0cyBzZWNvbmQgb3IgZm91cnRoIGNlbGwgaW4gYSA1LWNlbGwgaW50ZXJ2YWwKICAgIHRhcmdldEluZGV4ID0gTWF0aC5yYW5kb20oKSA+IDAuNSA/IDEgOiAzOwogIH0gZWxzZSB7CiAgICAvLyBhbGdvcml0aG0gJ2EnIG9yICdiJyBvbiBhIG5vbi01LWNlbGwgaW50ZXJ2YWwgYWx3YXlzIHNlbGVjdHMgdGhlIG1pZGRsZSBjZWxsCiAgICB0YXJnZXRJbmRleCA9IE1hdGguZmxvb3IoaW50ZXJ2YWwubGVuZ3RoIC8gMik7CiAgfQoKICByZXR1cm4gaW50ZXJ2YWxbdGFyZ2V0SW5kZXhdOwp9OwoKdmFyIG1ha2VNb3ZlID0gZnVuY3Rpb24gbWFrZU1vdmUocGFydGljbGUpIHsKICB2YXIgdGFyZ2V0ID0gc3RvcmUuZ2V0dGVycy5nZXRQYXJ0aWNsZVRhcmdldChwYXJ0aWNsZS5pZCk7IC8vIHBhcnRpY2xlIHdhcyBleHRlbmRlZCB0b3dhcmRzIGEgZnJlZSBjZWxsOyBjb250cmFjdCBpbnRvIGl0CgogIGlmICh0YXJnZXQgJiYgc3RvcmUuZ2V0dGVycy5pc0dyaWRQb2ludEZyZWUodGFyZ2V0KSkgewogICAgc3RvcmUuY29tbWl0KCdtb3ZlUGFydGljbGVUb1RhcmdldCcsIHsKICAgICAgaWQ6IHBhcnRpY2xlLmlkCiAgICB9KTsKICB9IGVsc2UgewogICAgLy8gcGFydGljbGUgaXMgY29udHJhY3RlZCBpbnNpZGUgb2YgYSBjZWxsOyBleHBhbmQgdG93YXJkcyBuZXh0IHRhcmdldCBpZiBhbnkKICAgIHZhciBfdGFyZ2V0ID0gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSk7CgogICAgaWYgKF90YXJnZXQpIHsKICAgICAgc3RvcmUuY29tbWl0KCd1cGRhdGVQYXJ0aWNsZVRhcmdldCcsIHsKICAgICAgICBpZDogcGFydGljbGUuaWQsCiAgICAgICAgdGFyZ2V0OiBfdGFyZ2V0CiAgICAgIH0pOwogICAgfQogIH0KfTsKCnZhciBNQVhfUk9VTkRTID0gNTAwOwpleHBvcnQgdmFyIHJ1biA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgdmFyIF9nZXRHcmlkRGVuc2l0eUFuZERpYSwgaW5pdGlhbERpYW1ldGVyLCBpbml0aWFsRGVuc2l0eSwgcm91bmRzLCBtb3ZlcywgaGFuZGxlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdzdGFydFJ1bicpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY3JlYXRlUGFydGljbGVzKCk7IC8vIGFkZCBsb2cgd2l0aCBpbml0aWFsIGRhdGEgZm9yIHRoZSBydW4KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhZGRMb2dSZWNvcmQnKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9nZXRHcmlkRGVuc2l0eUFuZERpYSA9IGdldEdyaWREZW5zaXR5QW5kRGlhbWV0ZXIoc3RvcmUuZ2V0dGVycy5wb3B1bGF0ZWRHcmlkKSwgaW5pdGlhbERpYW1ldGVyID0gX2dldEdyaWREZW5zaXR5QW5kRGlhLmRpYW1ldGVyLCBpbml0aWFsRGVuc2l0eSA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYS5kZW5zaXR5OwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXBkYXRlQ3VycmVudExvZ1JlY29yZCcsIHsKICAgICAgICAgICAgICBpbml0aWFsRGVuc2l0eTogaW5pdGlhbERlbnNpdHksCiAgICAgICAgICAgICAgaW5pdGlhbERpYW1ldGVyOiBpbml0aWFsRGlhbWV0ZXIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByb3VuZHMgPSAwOwogICAgICAgICAgICBtb3ZlcyA9IDA7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb24KCiAgICAgICAgICAgIGhhbmRsZSA9IHNldEludGVydmFsKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgIHZhciBhY3RpdmVQYXJ0aWNsZXMsIGZpbmFsQ29uZmlndXJhdGlvbiwgX2dldEdyaWREZW5zaXR5QW5kRGlhMiwgZmluYWxEZW5zaXR5LCBmaW5hbERpYW1ldGVyOwoKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3QgYSBzdWJzZXQgb2YgYWxsIHRoZSBwYXJ0aWNsZXMgdGhhdCdsbCBnZXQgYSBjaGFuY2UgdG8gbWFrZSBhIG1vdmUgdGhpcyB0dXJuCiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQYXJ0aWNsZXMgPSBnZXRBY3RpdmVQYXJ0aWNsZXMoKTsgLy8gdXBkYXRlIHJvdW5kIGFuZCBtb3ZlcyBjb3VudGVycwoKICAgICAgICAgICAgICAgICAgICAgIG1vdmVzICs9IGFjdGl2ZVBhcnRpY2xlcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICByb3VuZHMrKzsgLy8gbW92ZSBwYXJ0aWNsZXMKCiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQYXJ0aWNsZXMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU1vdmUocCk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gY2hlY2sgaWYgcHJvYmxlbSBoYXMgYmVlbiBzb2x2ZWQgb3IgaWYgd2UndmUgcnVuIG91dCBvZiBtb3ZlcwoKICAgICAgICAgICAgICAgICAgICAgIGlmICghKCAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgICAgICAgICByb3VuZHMgPiBNQVhfUk9VTkRTIHx8IC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMuZXZlcnkoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMuaXNQb2ludElzb2xhdGVkKHN0b3JlLmdldHRlcnMuZ2V0UG9pbnQocC5jdXJyZW50Um93LCBwLmN1cnJlbnRDb2wpKSAmJiBzdG9yZS5nZXR0ZXJzLmdldFBhcnRpY2xlU3RhdGUocCkgPT09ICdjb250cmFjdGVkJzsKICAgICAgICAgICAgICAgICAgICAgIH0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlKTsgLy8gc3RvcCBwYXJ0aWNsZXMgZnJvbSBtb3ZpbmcKCiAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbmZpZ3VyYXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHN0b3JlLmdldHRlcnMucG9wdWxhdGVkR3JpZC5tYXAoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyaWRQb2ludFRvR3JpZENvb3JkaW5hdGVzKHApOwogICAgICAgICAgICAgICAgICAgICAgfSkpKTsgLy8gZ2V0IGZpbmFsIHN0YXRzIGFuZCB1cGRhdGUgbG9nIHJlY29yZAoKICAgICAgICAgICAgICAgICAgICAgIF9nZXRHcmlkRGVuc2l0eUFuZERpYTIgPSBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyKHN0b3JlLmdldHRlcnMucG9wdWxhdGVkR3JpZCksIGZpbmFsRGVuc2l0eSA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYTIuZGVuc2l0eSwgZmluYWxEaWFtZXRlciA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYTIuZGlhbWV0ZXI7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUN1cnJlbnRMb2dSZWNvcmQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRGVuc2l0eTogZmluYWxEZW5zaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpYW1ldGVyOiBmaW5hbERpYW1ldGVyLAogICAgICAgICAgICAgICAgICAgICAgICBtb3ZlczogbW92ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHJvdW5kczogcm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsOiAhKHJvdW5kcyA+IE1BWF9ST1VORFMpLAogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbmZpZ3VyYXRpb246IGZpbmFsQ29uZmlndXJhdGlvbgogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzdG9yZS5zdGF0ZS5ydW5Db3VudCA8IHN0b3JlLnN0YXRlLm1heFJ1bnMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bigpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKSwgREVMQVkpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBydW4oKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTs="},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":"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","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\nimport { sampleSize } from 'lodash';\nimport { getGridDensityAndDiameter } from './stats';\nimport {\n  getRandomRow,\n  getRandomCol,\n  getRandomBool,\n  gridPointToGridCoordinates,\n} from './utils';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst DELAY = 100;\n\n// pushes particles for a new run to the store\nconst createParticles = () => {\n  //eslint-disable-next-line @typescript-eslint/no-extra-semi\n  [...Array(store.state.numParticles)].forEach((_i) => {\n    store.commit('pushParticle', {\n      id: uuidv4(),\n      currentRow: getRandomRow(),\n      currentCol: getRandomCol(),\n      isObstacle: getRandomBool(0),\n    } as IParticle);\n  });\n};\n\nconst getActiveParticles = (): IParticle[] =>\n  store.getters.nonObstacleParticles;\n// sampleSize(\n//   store.getters.nonObstacleParticles,\n//   Math.floor(Math.random() * (store.state.particles.length - 1) + 1)\n// );\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const { freeNeighborInterval, obstacle } =\n    store.getters.getFreeNeighborsInterval(particlePoint) as {\n      freeNeighborInterval: GridPoint[];\n      obstacle: boolean;\n    };\n\n  return selectTargetFromInterval(freeNeighborInterval, obstacle);\n};\n\nconst selectTargetFromInterval = (\n  interval: GridPoint[],\n  thereIsObstacle: boolean\n): GridPoint | null => {\n  let algorithm = store.state.algorithm;\n  let targetIndex;\n\n  if (algorithm === 'c') {\n    // algorithm 'c' becomes 'b' if there is an adjacent obstacle, 'a' otherwise\n    algorithm = thereIsObstacle ? 'b' : 'a';\n  }\n\n  if (interval.length <= 2 || interval.length === 6) {\n    // no algorithm makes a move on an interval 1, 2, or 6 cells long\n    return null;\n  }\n  if (interval.length === 5 && algorithm === 'b') {\n    // algorithm 'b' selects second or fourth cell in a 5-cell interval\n    targetIndex = Math.random() > 0.5 ? 1 : 3;\n  } else {\n    // algorithm 'a' or 'b' on a non-5-cell interval always selects the middle cell\n    targetIndex = Math.floor(interval.length / 2);\n  }\n\n  return interval[targetIndex];\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n\n  // particle was extended towards a free cell; contract into it\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    // particle is contracted inside of a cell; expand towards next target if any\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nconst MAX_ROUNDS = 500;\n\nexport const run = async (): Promise<void> => {\n  // reset state\n  await store.dispatch('startRun');\n  createParticles();\n\n  // add log with initial data for the run\n  await store.dispatch('addLogRecord');\n\n  const { diameter: initialDiameter, density: initialDensity } =\n    getGridDensityAndDiameter(store.getters.populatedGrid);\n  await store.dispatch('updateCurrentLogRecord', {\n    initialDensity,\n    initialDiameter,\n  });\n\n  let rounds = 0;\n  let moves = 0;\n\n  // eslint-disable-next-line no-constant-condition\n  const handle = setInterval(async () => {\n    // select a subset of all the particles that'll get a chance to make a move this turn\n    const activeParticles = getActiveParticles();\n\n    // update round and moves counters\n    moves += activeParticles.length;\n    rounds++;\n\n    // move particles\n    activeParticles.forEach((p) => makeMove(p));\n\n    // check if problem has been solved or if we've run out of moves\n    if (\n      // failure\n      rounds > MAX_ROUNDS ||\n      // success\n      store.getters.nonObstacleParticles.every(\n        (p: IParticle) =>\n          store.getters.isPointIsolated(\n            store.getters.getPoint(p.currentRow, p.currentCol)\n          ) && store.getters.getParticleState(p) === 'contracted'\n      )\n    ) {\n      clearInterval(handle); // stop particles from moving\n\n      const finalConfiguration = JSON.parse(\n        JSON.stringify(\n          (store.getters.populatedGrid as GridPoint[]).map((p) =>\n            gridPointToGridCoordinates(p)\n          )\n        )\n      );\n      // get final stats and update log record\n      const { density: finalDensity, diameter: finalDiameter } =\n        getGridDensityAndDiameter(\n          store.getters.populatedGrid as GridPoint[]\n        );\n      await store.dispatch('updateCurrentLogRecord', {\n        finalDensity,\n        finalDiameter,\n        moves,\n        rounds,\n        successful: !(rounds > MAX_ROUNDS),\n        finalConfiguration,\n      });\n\n      if (store.state.runCount < store.state.maxRuns) {\n        await run();\n      }\n    }\n  }, DELAY);\n};\n"],"sourceRoot":""}]}