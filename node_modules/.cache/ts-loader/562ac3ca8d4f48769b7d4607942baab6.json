{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1644774217845},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NhbXVlbGUvRGVza3RvcC92dWUvcHJvZ3JhbW1hYmxlX21hdHRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvc2FtdWVsZS9EZXNrdG9wL3Z1ZS9wcm9ncmFtbWFibGVfbWF0dGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgeyBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyIH0gZnJvbSAnLi9zdGF0cyc7CmltcG9ydCB7IGdldFJhbmRvbVJvdywgZ2V0UmFuZG9tQ29sLCBnZXRSYW5kb21Cb29sIH0gZnJvbSAnLi91dGlscyc7CmltcG9ydCB7IHY0IGFzIHV1aWR2NCB9IGZyb20gJ3V1aWQnOwp2YXIgREVMQVkgPSAxMDA7IC8vIHB1c2hlcyBwYXJ0aWNsZXMgZm9yIGEgbmV3IHJ1biB0byB0aGUgc3RvcmUKCnZhciBjcmVhdGVQYXJ0aWNsZXMgPSBmdW5jdGlvbiBjcmVhdGVQYXJ0aWNsZXMoKSB7CiAgLy9lc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4dHJhLXNlbWkKICBfdG9Db25zdW1hYmxlQXJyYXkoQXJyYXkoc3RvcmUuc3RhdGUubnVtUGFydGljbGVzKSkuZm9yRWFjaChmdW5jdGlvbiAoX2kpIHsKICAgIHN0b3JlLmNvbW1pdCgncHVzaFBhcnRpY2xlJywgewogICAgICBpZDogdXVpZHY0KCksCiAgICAgIGN1cnJlbnRSb3c6IGdldFJhbmRvbVJvdygpLAogICAgICBjdXJyZW50Q29sOiBnZXRSYW5kb21Db2woKSwKICAgICAgaXNPYnN0YWNsZTogZ2V0UmFuZG9tQm9vbCgwKQogICAgfSk7CiAgfSk7Cn07Cgp2YXIgZ2V0QWN0aXZlUGFydGljbGVzID0gZnVuY3Rpb24gZ2V0QWN0aXZlUGFydGljbGVzKCkgewogIHJldHVybiBzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzOwp9OyAvLyBzYW1wbGVTaXplKAovLyAgIHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMsCi8vICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHN0b3JlLnN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxKSArIDEpCi8vICk7CgoKdmFyIGdldE5leHRUYXJnZXQgPSBmdW5jdGlvbiBnZXROZXh0VGFyZ2V0KHBhcnRpY2xlKSB7CiAgdmFyIHBhcnRpY2xlUG9pbnQgPSBzdG9yZS5nZXR0ZXJzLmdldFBvaW50KHBhcnRpY2xlLmN1cnJlbnRSb3csIHBhcnRpY2xlLmN1cnJlbnRDb2wpOwoKICB2YXIgX3N0b3JlJGdldHRlcnMkZ2V0RnJlID0gc3RvcmUuZ2V0dGVycy5nZXRGcmVlTmVpZ2hib3JzSW50ZXJ2YWwocGFydGljbGVQb2ludCksCiAgICAgIGZyZWVOZWlnaGJvckludGVydmFsID0gX3N0b3JlJGdldHRlcnMkZ2V0RnJlLmZyZWVOZWlnaGJvckludGVydmFsLAogICAgICBvYnN0YWNsZSA9IF9zdG9yZSRnZXR0ZXJzJGdldEZyZS5vYnN0YWNsZTsKCiAgcmV0dXJuIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbChmcmVlTmVpZ2hib3JJbnRlcnZhbCwgb2JzdGFjbGUpOwp9OwoKdmFyIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbCA9IGZ1bmN0aW9uIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbChpbnRlcnZhbCwgdGhlcmVJc09ic3RhY2xlKSB7CiAgdmFyIGFsZ29yaXRobSA9IHN0b3JlLnN0YXRlLmFsZ29yaXRobTsKICB2YXIgdGFyZ2V0SW5kZXg7CgogIGlmIChhbGdvcml0aG0gPT09ICdjJykgewogICAgLy8gYWxnb3JpdGhtICdjJyBiZWNvbWVzICdiJyBpZiB0aGVyZSBpcyBhbiBhZGphY2VudCBvYnN0YWNsZSwgJ2EnIG90aGVyd2lzZQogICAgYWxnb3JpdGhtID0gdGhlcmVJc09ic3RhY2xlID8gJ2InIDogJ2EnOwogIH0KCiAgaWYgKGludGVydmFsLmxlbmd0aCA8PSAyIHx8IGludGVydmFsLmxlbmd0aCA9PT0gNikgewogICAgLy8gbm8gYWxnb3JpdGhtIG1ha2VzIGEgbW92ZSBvbiBhbiBpbnRlcnZhbCAxLCAyLCBvciA2IGNlbGxzIGxvbmcKICAgIHJldHVybiBudWxsOwogIH0KCiAgaWYgKGludGVydmFsLmxlbmd0aCA9PT0gNSAmJiBhbGdvcml0aG0gPT09ICdiJykgewogICAgLy8gYWxnb3JpdGhtICdiJyBzZWxlY3RzIHNlY29uZCBvciBmb3VydGggY2VsbCBpbiBhIDUtY2VsbCBpbnRlcnZhbAogICAgdGFyZ2V0SW5kZXggPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gMSA6IDM7CiAgfSBlbHNlIHsKICAgIC8vIGFsZ29yaXRobSAnYScgb3IgJ2InIG9uIGEgbm9uLTUtY2VsbCBpbnRlcnZhbCBhbHdheXMgc2VsZWN0cyB0aGUgbWlkZGxlIGNlbGwKICAgIHRhcmdldEluZGV4ID0gTWF0aC5mbG9vcihpbnRlcnZhbC5sZW5ndGggLyAyKTsKICB9CgogIHJldHVybiBpbnRlcnZhbFt0YXJnZXRJbmRleF07Cn07Cgp2YXIgbWFrZU1vdmUgPSBmdW5jdGlvbiBtYWtlTW92ZShwYXJ0aWNsZSkgewogIHZhciB0YXJnZXQgPSBzdG9yZS5nZXR0ZXJzLmdldFBhcnRpY2xlVGFyZ2V0KHBhcnRpY2xlLmlkKTsgLy8gcGFydGljbGUgd2FzIGV4dGVuZGVkIHRvd2FyZHMgYSBmcmVlIGNlbGw7IGNvbnRyYWN0IGludG8gaXQKCiAgaWYgKHRhcmdldCAmJiBzdG9yZS5nZXR0ZXJzLmlzR3JpZFBvaW50RnJlZSh0YXJnZXQpKSB7CiAgICBzdG9yZS5jb21taXQoJ21vdmVQYXJ0aWNsZVRvVGFyZ2V0JywgewogICAgICBpZDogcGFydGljbGUuaWQKICAgIH0pOwogIH0gZWxzZSB7CiAgICAvLyBwYXJ0aWNsZSBpcyBjb250cmFjdGVkIGluc2lkZSBvZiBhIGNlbGw7IGV4cGFuZCB0b3dhcmRzIG5leHQgdGFyZ2V0IGlmIGFueQogICAgdmFyIF90YXJnZXQgPSBnZXROZXh0VGFyZ2V0KHBhcnRpY2xlKTsKCiAgICBpZiAoX3RhcmdldCkgewogICAgICBzdG9yZS5jb21taXQoJ3VwZGF0ZVBhcnRpY2xlVGFyZ2V0JywgewogICAgICAgIGlkOiBwYXJ0aWNsZS5pZCwKICAgICAgICB0YXJnZXQ6IF90YXJnZXQKICAgICAgfSk7CiAgICB9CiAgfQp9OwoKdmFyIE1BWF9ST1VORFMgPSAxMDAwOwpleHBvcnQgdmFyIHJ1biA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgdmFyIF9nZXRHcmlkRGVuc2l0eUFuZERpYSwgaW5pdGlhbERpYW1ldGVyLCBpbml0aWFsRGVuc2l0eSwgcm91bmRzLCBtb3ZlcywgaGFuZGxlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdzdGFydFJ1bicpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY3JlYXRlUGFydGljbGVzKCk7IC8vIGFkZCBsb2cgd2l0aCBpbml0aWFsIGRhdGEgZm9yIHRoZSBydW4KCiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdhZGRMb2dSZWNvcmQnKTsKCiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF9nZXRHcmlkRGVuc2l0eUFuZERpYSA9IGdldEdyaWREZW5zaXR5QW5kRGlhbWV0ZXIoc3RvcmUuZ2V0dGVycy5wb3B1bGF0ZWRHcmlkKSwgaW5pdGlhbERpYW1ldGVyID0gX2dldEdyaWREZW5zaXR5QW5kRGlhLmRpYW1ldGVyLCBpbml0aWFsRGVuc2l0eSA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYS5kZW5zaXR5OwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgndXBkYXRlQ3VycmVudExvZ1JlY29yZCcsIHsKICAgICAgICAgICAgICBpbml0aWFsRGVuc2l0eTogaW5pdGlhbERlbnNpdHksCiAgICAgICAgICAgICAgaW5pdGlhbERpYW1ldGVyOiBpbml0aWFsRGlhbWV0ZXIKICAgICAgICAgICAgfSk7CgogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByb3VuZHMgPSAwOwogICAgICAgICAgICBtb3ZlcyA9IDA7IC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zdGFudC1jb25kaXRpb24KCiAgICAgICAgICAgIGhhbmRsZSA9IHNldEludGVydmFsKCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgICAgICAgIHZhciBhY3RpdmVQYXJ0aWNsZXMsIGZpbmFsQ29uZmlndXJhdGlvbiwgX2dldEdyaWREZW5zaXR5QW5kRGlhMiwgZmluYWxEZW5zaXR5LCBmaW5hbERpYW1ldGVyOwoKICAgICAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxlY3QgYSBzdWJzZXQgb2YgYWxsIHRoZSBwYXJ0aWNsZXMgdGhhdCdsbCBnZXQgYSBjaGFuY2UgdG8gbWFrZSBhIG1vdmUgdGhpcyB0dXJuCiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQYXJ0aWNsZXMgPSBnZXRBY3RpdmVQYXJ0aWNsZXMoKTsgLy8gdXBkYXRlIHJvdW5kIGFuZCBtb3ZlcyBjb3VudGVycwoKICAgICAgICAgICAgICAgICAgICAgIG1vdmVzICs9IGFjdGl2ZVBhcnRpY2xlcy5sZW5ndGg7CiAgICAgICAgICAgICAgICAgICAgICByb3VuZHMrKzsgLy8gbW92ZSBwYXJ0aWNsZXMKCiAgICAgICAgICAgICAgICAgICAgICBhY3RpdmVQYXJ0aWNsZXMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbWFrZU1vdmUocCk7CiAgICAgICAgICAgICAgICAgICAgICB9KTsgLy8gY2hlY2sgaWYgcHJvYmxlbSBoYXMgYmVlbiBzb2x2ZWQgb3IgaWYgd2UndmUgcnVuIG91dCBvZiBtb3ZlcwoKICAgICAgICAgICAgICAgICAgICAgIGlmICghKCAvLyBmYWlsdXJlCiAgICAgICAgICAgICAgICAgICAgICByb3VuZHMgPiBNQVhfUk9VTkRTIHx8IC8vIHN1Y2Nlc3MKICAgICAgICAgICAgICAgICAgICAgIHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMuZXZlcnkoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMuaXNQb2ludElzb2xhdGVkKHN0b3JlLmdldHRlcnMuZ2V0UG9pbnQocC5jdXJyZW50Um93LCBwLmN1cnJlbnRDb2wpKSAmJiBzdG9yZS5nZXR0ZXJzLmdldFBhcnRpY2xlU3RhdGUocCkgPT09ICdjb250cmFjdGVkJzsKICAgICAgICAgICAgICAgICAgICAgIH0pKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlKTsgLy8gc3RvcCBwYXJ0aWNsZXMgZnJvbSBtb3ZpbmcKCiAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbmZpZ3VyYXRpb24gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGdldHRlcnMucG9wdWxhdGVkR3JpZC5tYXAoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGdyaWRQb2ludFRvR3JpZENvb3JkaW5hdGVzKHApOwogICAgICAgICAgICAgICAgICAgICAgfSkpKTsgLy8gZ2V0IGZpbmFsIHN0YXRzIGFuZCB1cGRhdGUgbG9nIHJlY29yZAoKICAgICAgICAgICAgICAgICAgICAgIF9nZXRHcmlkRGVuc2l0eUFuZERpYTIgPSBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyKGZpbmFsQ29uZmlndXJhdGlvbiksIGZpbmFsRGVuc2l0eSA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYTIuZGVuc2l0eSwgZmluYWxEaWFtZXRlciA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYTIuZGlhbWV0ZXI7CiAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUN1cnJlbnRMb2dSZWNvcmQnLCB7CiAgICAgICAgICAgICAgICAgICAgICAgIGZpbmFsRGVuc2l0eTogZmluYWxEZW5zaXR5LAogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERpYW1ldGVyOiBmaW5hbERpYW1ldGVyLAogICAgICAgICAgICAgICAgICAgICAgICBtb3ZlczogbW92ZXMsCiAgICAgICAgICAgICAgICAgICAgICAgIHJvdW5kczogcm91bmRzLAogICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzZnVsOiAhKHJvdW5kcyA+IE1BWF9ST1VORFMpLAogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbmZpZ3VyYXRpb246IGZpbmFsQ29uZmlndXJhdGlvbgogICAgICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgICAgICAgICBpZiAoIShzdG9yZS5zdGF0ZS5ydW5Db3VudCA8IHN0b3JlLnN0YXRlLm1heFJ1bnMpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJ1bigpOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgICAgIH0pKSwgREVMQVkpOwoKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sIF9jYWxsZWUyKTsKICB9KSk7CgogIHJldHVybiBmdW5jdGlvbiBydW4oKSB7CiAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH07Cn0oKTs="},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":"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","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\nimport { sampleSize } from 'lodash';\nimport { getGridDensityAndDiameter } from './stats';\nimport { getRandomRow, getRandomCol, getRandomBool } from './utils';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst DELAY = 100;\n\n// pushes particles for a new run to the store\nconst createParticles = () => {\n  //eslint-disable-next-line @typescript-eslint/no-extra-semi\n  [...Array(store.state.numParticles)].forEach((_i) => {\n    store.commit('pushParticle', {\n      id: uuidv4(),\n      currentRow: getRandomRow(),\n      currentCol: getRandomCol(),\n      isObstacle: getRandomBool(0),\n    } as IParticle);\n  });\n};\n\nconst getActiveParticles = (): IParticle[] =>\n  store.getters.nonObstacleParticles;\n// sampleSize(\n//   store.getters.nonObstacleParticles,\n//   Math.floor(Math.random() * (store.state.particles.length - 1) + 1)\n// );\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const { freeNeighborInterval, obstacle } =\n    store.getters.getFreeNeighborsInterval(particlePoint) as {\n      freeNeighborInterval: GridPoint[];\n      obstacle: boolean;\n    };\n\n  return selectTargetFromInterval(freeNeighborInterval, obstacle);\n};\n\nconst selectTargetFromInterval = (\n  interval: GridPoint[],\n  thereIsObstacle: boolean\n): GridPoint | null => {\n  let algorithm = store.state.algorithm;\n  let targetIndex;\n\n  if (algorithm === 'c') {\n    // algorithm 'c' becomes 'b' if there is an adjacent obstacle, 'a' otherwise\n    algorithm = thereIsObstacle ? 'b' : 'a';\n  }\n\n  if (interval.length <= 2 || interval.length === 6) {\n    // no algorithm makes a move on an interval 1, 2, or 6 cells long\n    return null;\n  }\n  if (interval.length === 5 && algorithm === 'b') {\n    // algorithm 'b' selects second or fourth cell in a 5-cell interval\n    targetIndex = Math.random() > 0.5 ? 1 : 3;\n  } else {\n    // algorithm 'a' or 'b' on a non-5-cell interval always selects the middle cell\n    targetIndex = Math.floor(interval.length / 2);\n  }\n\n  return interval[targetIndex];\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n\n  // particle was extended towards a free cell; contract into it\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    // particle is contracted inside of a cell; expand towards next target if any\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nconst MAX_ROUNDS = 1000;\n\nexport const run = async (): Promise<void> => {\n  // reset state\n  await store.dispatch('startRun');\n  createParticles();\n\n  // add log with initial data for the run\n  await store.dispatch('addLogRecord');\n\n  const { diameter: initialDiameter, density: initialDensity } =\n    getGridDensityAndDiameter(store.getters.populatedGrid);\n  await store.dispatch('updateCurrentLogRecord', {\n    initialDensity,\n    initialDiameter,\n  });\n\n  let rounds = 0;\n  let moves = 0;\n\n  // eslint-disable-next-line no-constant-condition\n  const handle = setInterval(async () => {\n    // select a subset of all the particles that'll get a chance to make a move this turn\n    const activeParticles = getActiveParticles();\n\n    // update round and moves counters\n    moves += activeParticles.length;\n    rounds++;\n\n    // move particles\n    activeParticles.forEach((p) => makeMove(p));\n\n    // check if problem has been solved or if we've run out of moves\n    if (\n      // failure\n      rounds > MAX_ROUNDS ||\n      // success\n      store.getters.nonObstacleParticles.every(\n        (p: IParticle) =>\n          store.getters.isPointIsolated(\n            store.getters.getPoint(p.currentRow, p.currentCol)\n          ) && store.getters.getParticleState(p) === 'contracted'\n      )\n    ) {\n      clearInterval(handle); // stop particles from moving\n\n      const finalConfiguration = JSON.parse(\n        JSON.stringify((getters.populatedGrid as GridPoint[]).map(p => gridPointToGridCoordinates(p)))\n      // get final stats and update log record\n      const { density: finalDensity, diameter: finalDiameter } =\n        getGridDensityAndDiameter(finalConfiguration);\n      await store.dispatch('updateCurrentLogRecord', {\n        finalDensity,\n        finalDiameter,\n        moves,\n        rounds,\n        successful: !(rounds > MAX_ROUNDS),\n        finalConfiguration,\n      });\n\n      if (store.state.runCount < store.state.maxRuns) {\n        await run();\n      }\n    }\n  }, DELAY);\n};\n"],"sourceRoot":""}]}