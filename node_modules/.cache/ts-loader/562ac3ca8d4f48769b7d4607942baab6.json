{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1645012318916},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9ob21lL3NhbXVlbGUvRGVza3RvcC92dWUvcHJvZ3JhbW1hYmxlX21hdHRlci9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiL2hvbWUvc2FtdWVsZS9EZXNrdG9wL3Z1ZS9wcm9ncmFtbWFibGVfbWF0dGVyL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi50aW1lcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmpzb24uc3RyaW5naWZ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0IHN0b3JlIGZyb20gJy4vc3RvcmUnOwppbXBvcnQgeyBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyIH0gZnJvbSAnLi9zdGF0cyc7CmltcG9ydCB7IGdldFJhbmRvbVJvdywgZ2V0UmFuZG9tQ29sLCBnZXRSYW5kb21Cb29sLCBncmlkUG9pbnRUb0dyaWRDb29yZGluYXRlcyB9IGZyb20gJy4vdXRpbHMnOwppbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJzsKdmFyIERFTEFZID0gMTAwOyAvLyBwdXNoZXMgcGFydGljbGVzIGZvciBhIG5ldyBydW4gdG8gdGhlIHN0b3JlCgp2YXIgY3JlYXRlUGFydGljbGVzID0gZnVuY3Rpb24gY3JlYXRlUGFydGljbGVzKCkgewogIC8vZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHRyYS1zZW1pCiAgX3RvQ29uc3VtYWJsZUFycmF5KEFycmF5KHN0b3JlLnN0YXRlLm51bVBhcnRpY2xlcykpLmZvckVhY2goZnVuY3Rpb24gKF9pKSB7CiAgICBzdG9yZS5jb21taXQoJ3B1c2hQYXJ0aWNsZScsIHsKICAgICAgaWQ6IHV1aWR2NCgpLAogICAgICBjdXJyZW50Um93OiBnZXRSYW5kb21Sb3coKSwKICAgICAgY3VycmVudENvbDogZ2V0UmFuZG9tQ29sKCksCiAgICAgIGlzT2JzdGFjbGU6IGZhbHNlLAogICAgICBjbG9ja3dpc2U6IGdldFJhbmRvbUJvb2woMC41KQogICAgfSk7CiAgfSk7Cn07Cgp2YXIgY3JlYXRlT2JzdGFjbGVzID0gZnVuY3Rpb24gY3JlYXRlT2JzdGFjbGVzKCkgewogIHN0b3JlLnN0YXRlLm9ic3RhY2xlQ29vcmRpbmF0ZXMuZm9yRWFjaChmdW5jdGlvbiAocCkgewogICAgc3RvcmUuY29tbWl0KCdwdXNoUGFydGljbGUnLCB7CiAgICAgIGlkOiB1dWlkdjQoKSwKICAgICAgY3VycmVudFJvdzogcFswXSwKICAgICAgY3VycmVudENvbDogcFsxXSwKICAgICAgaXNPYnN0YWNsZTogdHJ1ZSwKICAgICAgY2xvY2t3aXNlOiBmYWxzZQogICAgfSk7CiAgfSk7Cn07Cgp2YXIgZ2V0QWN0aXZlUGFydGljbGVzID0gZnVuY3Rpb24gZ2V0QWN0aXZlUGFydGljbGVzKCkgewogIHJldHVybiBzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzOwp9OyAvLyBzYW1wbGVTaXplKAovLyAgIHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMsCi8vICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHN0b3JlLnN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxKSArIDEpCi8vICk7CgoKdmFyIGdldE5leHRUYXJnZXQgPSBmdW5jdGlvbiBnZXROZXh0VGFyZ2V0KHBhcnRpY2xlKSB7CiAgdmFyIHBhcnRpY2xlUG9pbnQgPSBzdG9yZS5nZXR0ZXJzLmdldFBvaW50KHBhcnRpY2xlLmN1cnJlbnRSb3csIHBhcnRpY2xlLmN1cnJlbnRDb2wpOwoKICB2YXIgX3N0b3JlJGdldHRlcnMkZ2V0RnJlID0gc3RvcmUuZ2V0dGVycy5nZXRGcmVlTmVpZ2hib3JzSW50ZXJ2YWwocGFydGljbGVQb2ludCksCiAgICAgIGZyZWVOZWlnaGJvckludGVydmFsID0gX3N0b3JlJGdldHRlcnMkZ2V0RnJlLmZyZWVOZWlnaGJvckludGVydmFsLAogICAgICBvYnN0YWNsZSA9IF9zdG9yZSRnZXR0ZXJzJGdldEZyZS5vYnN0YWNsZTsKCiAgcmV0dXJuIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbChmcmVlTmVpZ2hib3JJbnRlcnZhbCwgb2JzdGFjbGUsIHBhcnRpY2xlLmNsb2Nrd2lzZSk7Cn07Cgp2YXIgc2VsZWN0VGFyZ2V0RnJvbUludGVydmFsID0gZnVuY3Rpb24gc2VsZWN0VGFyZ2V0RnJvbUludGVydmFsKGludGVydmFsLCB0aGVyZUlzT2JzdGFjbGUsIGNsb2Nrd2lzZSkgewogIHZhciBhbGdvcml0aG0gPSBzdG9yZS5zdGF0ZS5hbGdvcml0aG07CiAgdmFyIHRhcmdldEluZGV4OwoKICBpZiAoYWxnb3JpdGhtID09PSAnYycpIHsKICAgIC8vIGFsZ29yaXRobSAnYycgYmVjb21lcyAnYicgaWYgdGhlcmUgaXMgYW4gYWRqYWNlbnQgb2JzdGFjbGUsICdhJyBvdGhlcndpc2UKICAgIGFsZ29yaXRobSA9IHRoZXJlSXNPYnN0YWNsZSA/ICdiJyA6ICdhJzsKICB9CgogIGlmIChpbnRlcnZhbC5sZW5ndGggPCAyIHx8IGludGVydmFsLmxlbmd0aCA9PT0gNikgewogICAgLy8gbm8gYWxnb3JpdGhtIG1ha2VzIGEgbW92ZSBvbiBhbiBpbnRlcnZhbCAxLCAyLCBvciA2IGNlbGxzIGxvbmcKICAgIHJldHVybiBudWxsOwogIH0KCiAgaWYgKGludGVydmFsLmxlbmd0aCA9PT0gNSAmJiBhbGdvcml0aG0gPT09ICdiJykgewogICAgLy8gYWxnb3JpdGhtICdiJyBzZWxlY3RzIHNlY29uZCBvciBmb3VydGggY2VsbCBpbiBhIDUtY2VsbCBpbnRlcnZhbAogICAgdGFyZ2V0SW5kZXggPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gMSA6IDM7CgogICAgaWYgKGludGVydmFsLmxlbmd0aCAlIDIgPT09IDAgJiYgIWNsb2Nrd2lzZSkgewogICAgICB0YXJnZXRJbmRleC0tOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyBhbGdvcml0aG0gJ2EnIG9yICdiJyBvbiBhIG5vbi01LWNlbGwgaW50ZXJ2YWwgYWx3YXlzIHNlbGVjdHMgdGhlIG1pZGRsZSBjZWxsCiAgICB0YXJnZXRJbmRleCA9IE1hdGguZmxvb3IoaW50ZXJ2YWwubGVuZ3RoIC8gMik7CiAgfQoKICByZXR1cm4gaW50ZXJ2YWxbdGFyZ2V0SW5kZXhdOwp9OwoKdmFyIG1ha2VNb3ZlID0gZnVuY3Rpb24gbWFrZU1vdmUocGFydGljbGUpIHsKICB2YXIgdGFyZ2V0ID0gc3RvcmUuZ2V0dGVycy5nZXRQYXJ0aWNsZVRhcmdldChwYXJ0aWNsZS5pZCk7IC8vIHBhcnRpY2xlIHdhcyBleHRlbmRlZCB0b3dhcmRzIGEgZnJlZSBjZWxsOyBjb250cmFjdCBpbnRvIGl0CgogIGlmICh0YXJnZXQgJiYgc3RvcmUuZ2V0dGVycy5pc0dyaWRQb2ludEZyZWUodGFyZ2V0KSkgewogICAgc3RvcmUuY29tbWl0KCdtb3ZlUGFydGljbGVUb1RhcmdldCcsIHsKICAgICAgaWQ6IHBhcnRpY2xlLmlkCiAgICB9KTsKICB9IGVsc2UgewogICAgLy8gcGFydGljbGUgaXMgY29udHJhY3RlZCBpbnNpZGUgb2YgYSBjZWxsOyBleHBhbmQgdG93YXJkcyBuZXh0IHRhcmdldCBpZiBhbnkKICAgIHZhciBfdGFyZ2V0ID0gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSk7CgogICAgaWYgKF90YXJnZXQpIHsKICAgICAgc3RvcmUuY29tbWl0KCd1cGRhdGVQYXJ0aWNsZVRhcmdldCcsIHsKICAgICAgICBpZDogcGFydGljbGUuaWQsCiAgICAgICAgdGFyZ2V0OiBfdGFyZ2V0CiAgICAgIH0pOwogICAgfQogIH0KfTsKCnZhciBNQVhfUk9VTkRTID0gNTAwOwpleHBvcnQgdmFyIHJ1biA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgdmFyIF9nZXRHcmlkRGVuc2l0eUFuZERpYSwgaW5pdGlhbERpYW1ldGVyLCBpbml0aWFsRGVuc2l0eSwgcm91bmRzLCBtb3ZlcywgaGFuZGxlOwoKICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCdzdGFydFJ1bicpOwoKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgY3JlYXRlUGFydGljbGVzKCk7CiAgICAgICAgICAgIGNyZWF0ZU9ic3RhY2xlcygpOyAvLyBhZGQgbG9nIHdpdGggaW5pdGlhbCBkYXRhIGZvciB0aGUgcnVuCgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBzdG9yZS5kaXNwYXRjaCgnYWRkTG9nUmVjb3JkJyk7CgogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfZ2V0R3JpZERlbnNpdHlBbmREaWEgPSBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyKHN0b3JlLmdldHRlcnMucG9wdWxhdGVkR3JpZCksIGluaXRpYWxEaWFtZXRlciA9IF9nZXRHcmlkRGVuc2l0eUFuZERpYS5kaWFtZXRlciwgaW5pdGlhbERlbnNpdHkgPSBfZ2V0R3JpZERlbnNpdHlBbmREaWEuZGVuc2l0eTsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICByZXR1cm4gc3RvcmUuZGlzcGF0Y2goJ3VwZGF0ZUN1cnJlbnRMb2dSZWNvcmQnLCB7CiAgICAgICAgICAgICAgaW5pdGlhbERlbnNpdHk6IGluaXRpYWxEZW5zaXR5LAogICAgICAgICAgICAgIGluaXRpYWxEaWFtZXRlcjogaW5pdGlhbERpYW1ldGVyCiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgcm91bmRzID0gMDsKICAgICAgICAgICAgbW92ZXMgPSAwOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uCgogICAgICAgICAgICBoYW5kbGUgPSBzZXRJbnRlcnZhbCggLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgICAgICB2YXIgYWN0aXZlUGFydGljbGVzLCBmaW5hbENvbmZpZ3VyYXRpb24sIF9nZXRHcmlkRGVuc2l0eUFuZERpYTIsIGZpbmFsRGVuc2l0eSwgZmluYWxEaWFtZXRlcjsKCiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZWN0IGEgc3Vic2V0IG9mIGFsbCB0aGUgcGFydGljbGVzIHRoYXQnbGwgZ2V0IGEgY2hhbmNlIHRvIG1ha2UgYSBtb3ZlIHRoaXMgdHVybgogICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGFydGljbGVzID0gZ2V0QWN0aXZlUGFydGljbGVzKCk7IC8vIHVwZGF0ZSByb3VuZCBhbmQgbW92ZXMgY291bnRlcnMKCiAgICAgICAgICAgICAgICAgICAgICBtb3ZlcyArPSBhY3RpdmVQYXJ0aWNsZXMubGVuZ3RoOwogICAgICAgICAgICAgICAgICAgICAgcm91bmRzKys7IC8vIG1vdmUgcGFydGljbGVzCgogICAgICAgICAgICAgICAgICAgICAgYWN0aXZlUGFydGljbGVzLmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG1ha2VNb3ZlKHApOwogICAgICAgICAgICAgICAgICAgICAgfSk7IC8vIGNoZWNrIGlmIHByb2JsZW0gaGFzIGJlZW4gc29sdmVkIG9yIGlmIHdlJ3ZlIHJ1biBvdXQgb2YgbW92ZXMKCiAgICAgICAgICAgICAgICAgICAgICBpZiAoISggLy8gZmFpbHVyZQogICAgICAgICAgICAgICAgICAgICAgcm91bmRzID4gTUFYX1JPVU5EUyB8fCAvLyBzdWNjZXNzCiAgICAgICAgICAgICAgICAgICAgICBzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzLmV2ZXJ5KGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmlzUG9pbnRJc29sYXRlZChzdG9yZS5nZXR0ZXJzLmdldFBvaW50KHAuY3VycmVudFJvdywgcC5jdXJyZW50Q29sKSkgJiYgc3RvcmUuZ2V0dGVycy5nZXRQYXJ0aWNsZVN0YXRlKHApID09PSAnY29udHJhY3RlZCc7CiAgICAgICAgICAgICAgICAgICAgICB9KSkpIHsKICAgICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEzOwogICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKGhhbmRsZSk7IC8vIHN0b3AgcGFydGljbGVzIGZyb20gbW92aW5nCgogICAgICAgICAgICAgICAgICAgICAgZmluYWxDb25maWd1cmF0aW9uID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShzdG9yZS5nZXR0ZXJzLnBvcHVsYXRlZEdyaWQubWFwKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBncmlkUG9pbnRUb0dyaWRDb29yZGluYXRlcyhwKTsKICAgICAgICAgICAgICAgICAgICAgIH0pKSk7IC8vIGdldCBmaW5hbCBzdGF0cyBhbmQgdXBkYXRlIGxvZyByZWNvcmQKCiAgICAgICAgICAgICAgICAgICAgICBfZ2V0R3JpZERlbnNpdHlBbmREaWEyID0gZ2V0R3JpZERlbnNpdHlBbmREaWFtZXRlcihzdG9yZS5nZXR0ZXJzLnBvcHVsYXRlZEdyaWQpLCBmaW5hbERlbnNpdHkgPSBfZ2V0R3JpZERlbnNpdHlBbmREaWEyLmRlbnNpdHksIGZpbmFsRGlhbWV0ZXIgPSBfZ2V0R3JpZERlbnNpdHlBbmREaWEyLmRpYW1ldGVyOwogICAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHN0b3JlLmRpc3BhdGNoKCd1cGRhdGVDdXJyZW50TG9nUmVjb3JkJywgewogICAgICAgICAgICAgICAgICAgICAgICBmaW5hbERlbnNpdHk6IGZpbmFsRGVuc2l0eSwKICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxEaWFtZXRlcjogZmluYWxEaWFtZXRlciwKICAgICAgICAgICAgICAgICAgICAgICAgbW92ZXM6IG1vdmVzLAogICAgICAgICAgICAgICAgICAgICAgICByb3VuZHM6IHJvdW5kcywKICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2Vzc2Z1bDogIShyb3VuZHMgPiBNQVhfUk9VTkRTKSwKICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb25maWd1cmF0aW9uOiBmaW5hbENvbmZpZ3VyYXRpb24KICAgICAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAgICAgaWYgKCEoc3RvcmUuc3RhdGUucnVuQ291bnQgPCBzdG9yZS5zdGF0ZS5tYXhSdW5zKSkgewogICAgICAgICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMzsKICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBydW4oKTsKCiAgICAgICAgICAgICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgICAgICB9KSksIERFTEFZKTsKCiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgfQogICAgICB9CiAgICB9LCBfY2FsbGVlMik7CiAgfSkpOwoKICByZXR1cm4gZnVuY3Rpb24gcnVuKCkgewogICAgcmV0dXJuIF9yZWYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9Owp9KCk7"},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":"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","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\nimport { sampleSize } from 'lodash';\nimport { getGridDensityAndDiameter } from './stats';\nimport {\n  getRandomRow,\n  getRandomCol,\n  getRandomBool,\n  gridPointToGridCoordinates,\n} from './utils';\nimport { v4 as uuidv4 } from 'uuid';\n\nconst DELAY = 100;\n\n// pushes particles for a new run to the store\nconst createParticles = () => {\n  //eslint-disable-next-line @typescript-eslint/no-extra-semi\n  [...Array(store.state.numParticles)].forEach((_i) => {\n    store.commit('pushParticle', {\n      id: uuidv4(),\n      currentRow: getRandomRow(),\n      currentCol: getRandomCol(),\n      isObstacle: false,\n      clockwise: getRandomBool(0.5),\n    } as IParticle);\n  });\n};\n\nconst createObstacles = () => {\n  store.state.obstacleCoordinates.forEach((p) => {\n    store.commit('pushParticle', {\n      id: uuidv4(),\n      currentRow: p[0],\n      currentCol: p[1],\n      isObstacle: true,\n      clockwise: false, // doesn't matter\n    });\n  });\n};\n\nconst getActiveParticles = (): IParticle[] =>\n  store.getters.nonObstacleParticles;\n// sampleSize(\n//   store.getters.nonObstacleParticles,\n//   Math.floor(Math.random() * (store.state.particles.length - 1) + 1)\n// );\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const { freeNeighborInterval, obstacle } =\n    store.getters.getFreeNeighborsInterval(particlePoint) as {\n      freeNeighborInterval: GridPoint[];\n      obstacle: boolean;\n    };\n\n  return selectTargetFromInterval(\n    freeNeighborInterval,\n    obstacle,\n    particle.clockwise\n  );\n};\n\nconst selectTargetFromInterval = (\n  interval: GridPoint[],\n  thereIsObstacle: boolean,\n  clockwise: boolean\n): GridPoint | null => {\n  let algorithm = store.state.algorithm;\n  let targetIndex;\n\n  if (algorithm === 'c') {\n    // algorithm 'c' becomes 'b' if there is an adjacent obstacle, 'a' otherwise\n    algorithm = thereIsObstacle ? 'b' : 'a';\n  }\n\n  if (interval.length < 2 || interval.length === 6) {\n    // no algorithm makes a move on an interval 1, 2, or 6 cells long\n    return null;\n  }\n  if (interval.length === 5 && algorithm === 'b') {\n    // algorithm 'b' selects second or fourth cell in a 5-cell interval\n    targetIndex = Math.random() > 0.5 ? 1 : 3;\n\n    if (interval.length % 2 === 0 && !clockwise) {\n      targetIndex--;\n    }\n  } else {\n    // algorithm 'a' or 'b' on a non-5-cell interval always selects the middle cell\n    targetIndex = Math.floor(interval.length / 2);\n  }\n\n  return interval[targetIndex];\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n\n  // particle was extended towards a free cell; contract into it\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    // particle is contracted inside of a cell; expand towards next target if any\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nconst MAX_ROUNDS = 500;\n\nexport const run = async (): Promise<void> => {\n  // reset state\n  await store.dispatch('startRun');\n  createParticles();\n  createObstacles();\n\n  // add log with initial data for the run\n  await store.dispatch('addLogRecord');\n\n  const { diameter: initialDiameter, density: initialDensity } =\n    getGridDensityAndDiameter(store.getters.populatedGrid);\n  await store.dispatch('updateCurrentLogRecord', {\n    initialDensity,\n    initialDiameter,\n  });\n\n  let rounds = 0;\n  let moves = 0;\n\n  // eslint-disable-next-line no-constant-condition\n  const handle = setInterval(async () => {\n    // select a subset of all the particles that'll get a chance to make a move this turn\n    const activeParticles = getActiveParticles();\n\n    // update round and moves counters\n    moves += activeParticles.length;\n    rounds++;\n\n    // move particles\n    activeParticles.forEach((p) => makeMove(p));\n\n    // check if problem has been solved or if we've run out of moves\n    if (\n      // failure\n      rounds > MAX_ROUNDS ||\n      // success\n      store.getters.nonObstacleParticles.every(\n        (p: IParticle) =>\n          store.getters.isPointIsolated(\n            store.getters.getPoint(p.currentRow, p.currentCol)\n          ) && store.getters.getParticleState(p) === 'contracted'\n      )\n    ) {\n      clearInterval(handle); // stop particles from moving\n\n      const finalConfiguration = JSON.parse(\n        JSON.stringify(\n          (store.getters.populatedGrid as GridPoint[]).map((p) =>\n            gridPointToGridCoordinates(p)\n          )\n        )\n      );\n      // get final stats and update log record\n      const { density: finalDensity, diameter: finalDiameter } =\n        getGridDensityAndDiameter(\n          store.getters.populatedGrid as GridPoint[]\n        );\n      await store.dispatch('updateCurrentLogRecord', {\n        finalDensity,\n        finalDiameter,\n        moves,\n        rounds,\n        successful: !(rounds > MAX_ROUNDS),\n        finalConfiguration,\n      });\n\n      if (store.state.runCount < store.state.maxRuns) {\n        await run();\n      }\n    }\n  }, DELAY);\n};\n"],"sourceRoot":""}]}