{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1644483273835},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKaW1wb3J0IHsgc2FtcGxlU2l6ZSB9IGZyb20gJ2xvZGFzaCc7CnZhciBERUxBWSA9IDEwMDsKCnZhciBnZXRBY3RpdmVQYXJ0aWNsZXMgPSBmdW5jdGlvbiBnZXRBY3RpdmVQYXJ0aWNsZXMoKSB7CiAgcmV0dXJuIHNhbXBsZVNpemUoc3RvcmUuZ2V0dGVycy5ub25PYnN0YWNsZVBhcnRpY2xlcywgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHN0b3JlLnN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxKSArIDEpKTsKfTsKCnZhciBnZXROZXh0VGFyZ2V0ID0gZnVuY3Rpb24gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSkgewogIHZhciBwYXJ0aWNsZVBvaW50ID0gc3RvcmUuZ2V0dGVycy5nZXRQb2ludChwYXJ0aWNsZS5jdXJyZW50Um93LCBwYXJ0aWNsZS5jdXJyZW50Q29sKTsKCiAgdmFyIF9zdG9yZSRnZXR0ZXJzJGdldEZyZSA9IHN0b3JlLmdldHRlcnMuZ2V0RnJlZU5laWdoYm9yc0ludGVydmFsKHBhcnRpY2xlUG9pbnQpLAogICAgICBmcmVlTmVpZ2hib3JJbnRlcnZhbCA9IF9zdG9yZSRnZXR0ZXJzJGdldEZyZS5mcmVlTmVpZ2hib3JJbnRlcnZhbCwKICAgICAgb2JzdGFjbGUgPSBfc3RvcmUkZ2V0dGVycyRnZXRGcmUub2JzdGFjbGU7CgogIHJldHVybiBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwoZnJlZU5laWdoYm9ySW50ZXJ2YWwsIG9ic3RhY2xlKTsKfTsKCnZhciBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwgPSBmdW5jdGlvbiBzZWxlY3RUYXJnZXRGcm9tSW50ZXJ2YWwoaW50ZXJ2YWwsIHRoZXJlSXNPYnN0YWNsZSkgewogIHZhciBhbGdvcml0aG0gPSBzdG9yZS5zdGF0ZS5hbGdvcml0aG07CiAgdmFyIHRhcmdldEluZGV4OwoKICBpZiAoYWxnb3JpdGhtID09PSAnYycpIHsKICAgIGFsZ29yaXRobSA9IHRoZXJlSXNPYnN0YWNsZSA/ICdiJyA6ICdhJzsKICB9CgogIGlmIChpbnRlcnZhbC5sZW5ndGggPD0gMiB8fCBpbnRlcnZhbC5sZW5ndGggPT09IDYpIHsKICAgIHJldHVybiBudWxsOwogIH0KCiAgaWYgKGludGVydmFsLmxlbmd0aCA9PT0gNSAmJiBhbGdvcml0aG0gPT09ICdiJykgewogICAgdGFyZ2V0SW5kZXggPSBNYXRoLnJhbmRvbSgpID4gMC41ID8gMSA6IDM7CiAgfSBlbHNlIHsKICAgIHRhcmdldEluZGV4ID0gTWF0aC5mbG9vcihpbnRlcnZhbC5sZW5ndGggLyAyKTsKICB9CgogIHJldHVybiBpbnRlcnZhbFt0YXJnZXRJbmRleF07Cn07Cgp2YXIgbWFrZU1vdmUgPSBmdW5jdGlvbiBtYWtlTW92ZShwYXJ0aWNsZSkgewogIHZhciB0YXJnZXQgPSBzdG9yZS5nZXR0ZXJzLmdldFBhcnRpY2xlVGFyZ2V0KHBhcnRpY2xlLmlkKTsKCiAgaWYgKHRhcmdldCAmJiBzdG9yZS5nZXR0ZXJzLmlzR3JpZFBvaW50RnJlZSh0YXJnZXQpKSB7CiAgICBzdG9yZS5jb21taXQoJ21vdmVQYXJ0aWNsZVRvVGFyZ2V0JywgewogICAgICBpZDogcGFydGljbGUuaWQKICAgIH0pOwogIH0gZWxzZSB7CiAgICB2YXIgX3RhcmdldCA9IGdldE5leHRUYXJnZXQocGFydGljbGUpOwoKICAgIGlmIChfdGFyZ2V0KSB7CiAgICAgIHN0b3JlLmNvbW1pdCgndXBkYXRlUGFydGljbGVUYXJnZXQnLCB7CiAgICAgICAgaWQ6IHBhcnRpY2xlLmlkLAogICAgICAgIHRhcmdldDogX3RhcmdldAogICAgICB9KTsKICAgIH0KICB9Cn07CgpleHBvcnQgdmFyIHJ1biA9IGZ1bmN0aW9uIHJ1bigpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc3RhbnQtY29uZGl0aW9uCiAgdmFyIGhhbmRsZSA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgIHZhciBhY3RpdmVQYXJ0aWNsZXMgPSBnZXRBY3RpdmVQYXJ0aWNsZXMoKTsKICAgIGFjdGl2ZVBhcnRpY2xlcy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBtYWtlTW92ZShwKTsKICAgIH0pOwoKICAgIGlmIChzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzLmV2ZXJ5KGZ1bmN0aW9uIChwKSB7CiAgICAgIHJldHVybiBzdG9yZS5nZXR0ZXJzLmlzUG9pbnRJc29sYXRlZChzdG9yZS5nZXR0ZXJzLmdldFBvaW50KHAuY3VycmVudFJvdywgcC5jdXJyZW50Q29sKSkgJiYgc3RvcmUuZ2V0dGVycy5nZXRQYXJ0aWNsZVN0YXRlKHApID09PSAnY29udHJhY3RlZCc7CiAgICB9KSkgewogICAgICB3aW5kb3cuYWxlcnQoJ1Jpc29sdG8hJyk7CiAgICAgIGNsZWFySW50ZXJ2YWwoaGFuZGxlKTsKICAgICAgc3RvcmUuc3RhdGUuc2NoZWR1bGVySGFuZGxlID0gbnVsbDsKICAgIH0KICB9LCBERUxBWSk7CiAgc3RvcmUuc3RhdGUuc2NoZWR1bGVySGFuZGxlID0gaGFuZGxlOwp9Ow=="},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":"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","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\nimport { sampleSize } from 'lodash';\n\nconst DELAY = 100;\n\nconst getActiveParticles = (): IParticle[] =>\n  sampleSize(\n    store.getters.nonObstacleParticles,\n    Math.floor(Math.random() * (store.state.particles.length - 1) + 1)\n  );\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const { freeNeighborInterval, obstacle } =\n    store.getters.getFreeNeighborsInterval(particlePoint) as {\n      freeNeighborInterval: GridPoint[];\n      obstacle: boolean;\n    };\n\n  return selectTargetFromInterval(freeNeighborInterval, obstacle);\n};\n\nconst selectTargetFromInterval = (\n  interval: GridPoint[],\n  thereIsObstacle: boolean\n): GridPoint | null => {\n  let algorithm = store.state.algorithm;\n  let targetIndex;\n\n  if (algorithm === 'c') {\n    algorithm = thereIsObstacle ? 'b' : 'a';\n  }\n\n  if (interval.length <= 2 || interval.length === 6) {\n    return null;\n  }\n  if (interval.length === 5 && algorithm === 'b') {\n    targetIndex = Math.random() > 0.5 ? 1 : 3;\n  } else {\n    targetIndex = Math.floor(interval.length / 2);\n  }\n\n  return interval[targetIndex];\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nexport const run = (): void => {\n  // eslint-disable-next-line no-constant-condition\n  const handle = setInterval(() => {\n    const activeParticles = getActiveParticles();\n\n    activeParticles.forEach((p) => makeMove(p));\n\n    if (\n      store.getters.nonObstacleParticles.every(\n        (p: IParticle) =>\n          store.getters.isPointIsolated(\n            store.getters.getPoint(p.currentRow, p.currentCol)\n          ) && store.getters.getParticleState(p) === 'contracted'\n      )\n    ) {\n      window.alert('Risolto!');\n      clearInterval(handle);\n      store.state.schedulerHandle = null;\n    }\n  }, DELAY);\n\n  store.state.schedulerHandle = handle;\n};\n"],"sourceRoot":""}]}