{"remainingRequest":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js!/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js??ref--15-2!/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","dependencies":[{"path":"/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts","mtime":1644693163801},{"path":"/home/samuele/Desktop/vue/programmable_matter/babel.config.js","mtime":1643707685170},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/ts-loader/index.js","mtime":499162500000},{"path":"/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLnRpbWVycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5ldmVyeS5qcyI7CmltcG9ydCBzdG9yZSBmcm9tICcuL3N0b3JlJzsKaW1wb3J0IHsgZ2V0R3JpZERlbnNpdHlBbmREaWFtZXRlciB9IGZyb20gJy4vc3RhdHMnOwp2YXIgREVMQVkgPSAxMDA7Cgp2YXIgZ2V0QWN0aXZlUGFydGljbGVzID0gZnVuY3Rpb24gZ2V0QWN0aXZlUGFydGljbGVzKCkgewogIHJldHVybiBzdG9yZS5nZXR0ZXJzLm5vbk9ic3RhY2xlUGFydGljbGVzOwp9OyAvLyBzYW1wbGVTaXplKAovLyAgIHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMsCi8vICAgTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHN0b3JlLnN0YXRlLnBhcnRpY2xlcy5sZW5ndGggLSAxKSArIDEpCi8vICk7CgoKdmFyIGdldE5leHRUYXJnZXQgPSBmdW5jdGlvbiBnZXROZXh0VGFyZ2V0KHBhcnRpY2xlKSB7CiAgdmFyIHBhcnRpY2xlUG9pbnQgPSBzdG9yZS5nZXR0ZXJzLmdldFBvaW50KHBhcnRpY2xlLmN1cnJlbnRSb3csIHBhcnRpY2xlLmN1cnJlbnRDb2wpOwoKICB2YXIgX3N0b3JlJGdldHRlcnMkZ2V0RnJlID0gc3RvcmUuZ2V0dGVycy5nZXRGcmVlTmVpZ2hib3JzSW50ZXJ2YWwocGFydGljbGVQb2ludCksCiAgICAgIGZyZWVOZWlnaGJvckludGVydmFsID0gX3N0b3JlJGdldHRlcnMkZ2V0RnJlLmZyZWVOZWlnaGJvckludGVydmFsLAogICAgICBvYnN0YWNsZSA9IF9zdG9yZSRnZXR0ZXJzJGdldEZyZS5vYnN0YWNsZTsKCiAgcmV0dXJuIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbChmcmVlTmVpZ2hib3JJbnRlcnZhbCwgb2JzdGFjbGUpOwp9OwoKdmFyIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbCA9IGZ1bmN0aW9uIHNlbGVjdFRhcmdldEZyb21JbnRlcnZhbChpbnRlcnZhbCwgdGhlcmVJc09ic3RhY2xlKSB7CiAgdmFyIGFsZ29yaXRobSA9IHN0b3JlLnN0YXRlLmFsZ29yaXRobTsKICB2YXIgdGFyZ2V0SW5kZXg7CgogIGlmIChhbGdvcml0aG0gPT09ICdjJykgewogICAgYWxnb3JpdGhtID0gdGhlcmVJc09ic3RhY2xlID8gJ2InIDogJ2EnOwogIH0KCiAgaWYgKGludGVydmFsLmxlbmd0aCA8PSAyIHx8IGludGVydmFsLmxlbmd0aCA9PT0gNikgewogICAgcmV0dXJuIG51bGw7CiAgfQoKICBpZiAoaW50ZXJ2YWwubGVuZ3RoID09PSA1ICYmIGFsZ29yaXRobSA9PT0gJ2InKSB7CiAgICB0YXJnZXRJbmRleCA9IE1hdGgucmFuZG9tKCkgPiAwLjUgPyAxIDogMzsKICB9IGVsc2UgewogICAgdGFyZ2V0SW5kZXggPSBNYXRoLmZsb29yKGludGVydmFsLmxlbmd0aCAvIDIpOwogIH0KCiAgcmV0dXJuIGludGVydmFsW3RhcmdldEluZGV4XTsKfTsKCnZhciBtYWtlTW92ZSA9IGZ1bmN0aW9uIG1ha2VNb3ZlKHBhcnRpY2xlKSB7CiAgdmFyIHRhcmdldCA9IHN0b3JlLmdldHRlcnMuZ2V0UGFydGljbGVUYXJnZXQocGFydGljbGUuaWQpOwoKICBpZiAodGFyZ2V0ICYmIHN0b3JlLmdldHRlcnMuaXNHcmlkUG9pbnRGcmVlKHRhcmdldCkpIHsKICAgIHN0b3JlLmNvbW1pdCgnbW92ZVBhcnRpY2xlVG9UYXJnZXQnLCB7CiAgICAgIGlkOiBwYXJ0aWNsZS5pZAogICAgfSk7CiAgfSBlbHNlIHsKICAgIHZhciBfdGFyZ2V0ID0gZ2V0TmV4dFRhcmdldChwYXJ0aWNsZSk7CgogICAgaWYgKF90YXJnZXQpIHsKICAgICAgc3RvcmUuY29tbWl0KCd1cGRhdGVQYXJ0aWNsZVRhcmdldCcsIHsKICAgICAgICBpZDogcGFydGljbGUuaWQsCiAgICAgICAgdGFyZ2V0OiBfdGFyZ2V0CiAgICAgIH0pOwogICAgfQogIH0KfTsKCmV4cG9ydCB2YXIgcnVuID0gZnVuY3Rpb24gcnVuKCkgewogIHN0b3JlLmRpc3BhdGNoKCdhZGRMb2dSZWNvcmQnKTsKICBzdG9yZS5kaXNwYXRjaCgndXBkYXRlQ3VycmVudExvZ1JlY29yZCcsIGdldEdyaWREZW5zaXR5QW5kRGlhbWV0ZXIoc3RvcmUuZ2V0dGVycy5wb3B1bGF0ZWRHcmlkKSk7CiAgY29uc29sZS5sb2coJ2luaXRpYWwgcmVjb3JkJywgc3RvcmUuc3RhdGUubG9nc1swXSk7CiAgdmFyIHJvdW5kcyA9IDA7CiAgdmFyIG1vdmVzID0gMDsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnN0YW50LWNvbmRpdGlvbgoKICB2YXIgaGFuZGxlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgdmFyIGFjdGl2ZVBhcnRpY2xlcyA9IGdldEFjdGl2ZVBhcnRpY2xlcygpOwogICAgbW92ZXMgKz0gYWN0aXZlUGFydGljbGVzLmxlbmd0aDsKICAgIHJvdW5kcysrOwogICAgYWN0aXZlUGFydGljbGVzLmZvckVhY2goZnVuY3Rpb24gKHApIHsKICAgICAgcmV0dXJuIG1ha2VNb3ZlKHApOwogICAgfSk7CgogICAgaWYgKHN0b3JlLmdldHRlcnMubm9uT2JzdGFjbGVQYXJ0aWNsZXMuZXZlcnkoZnVuY3Rpb24gKHApIHsKICAgICAgcmV0dXJuIHN0b3JlLmdldHRlcnMuaXNQb2ludElzb2xhdGVkKHN0b3JlLmdldHRlcnMuZ2V0UG9pbnQocC5jdXJyZW50Um93LCBwLmN1cnJlbnRDb2wpKSAmJiBzdG9yZS5nZXR0ZXJzLmdldFBhcnRpY2xlU3RhdGUocCkgPT09ICdjb250cmFjdGVkJzsKICAgIH0pKSB7CiAgICAgIHZhciBfZ2V0R3JpZERlbnNpdHlBbmREaWEgPSBnZXRHcmlkRGVuc2l0eUFuZERpYW1ldGVyKHN0b3JlLmdldHRlcnMucG9wdWxhdGVkR3JpZCksCiAgICAgICAgICBmaW5hbERlbnNpdHkgPSBfZ2V0R3JpZERlbnNpdHlBbmREaWEuZGVuc2l0eSwKICAgICAgICAgIGZpbmFsRGlhbWV0ZXIgPSBfZ2V0R3JpZERlbnNpdHlBbmREaWEuZGlhbWV0ZXI7CgogICAgICBzdG9yZS5kaXNwYXRjaCgndXBkYXRlQ3VycmVudExvZ1JlY29yZCcsIHsKICAgICAgICBmaW5hbERlbnNpdHk6IGZpbmFsRGVuc2l0eSwKICAgICAgICBmaW5hbERpYW1ldGVyOiBmaW5hbERpYW1ldGVyLAogICAgICAgIG1vdmVzOiBtb3ZlcywKICAgICAgICByb3VuZHM6IHJvdW5kcywKICAgICAgICBzdWNjZXNzZnVsOiB0cnVlCiAgICAgIH0pOwogICAgICBjb25zb2xlLmxvZygnZmluYWwgcmVjb3JkJywgc3RvcmUuc3RhdGUubG9nc1swXSk7CiAgICB9CiAgfSwgREVMQVkpOwp9OwoKdmFyIGdldFN0YXRpc3RpY3MgPSBmdW5jdGlvbiBnZXRTdGF0aXN0aWNzKCkgewogIC8vIFRPRE8gaW1wbGVtZW50CiAgcmV0dXJuIHsKICAgIGRpYW1ldGVyOiAwLAogICAgZGVuc2l0eTogMAogIH07Cn07"},{"version":3,"sources":["/home/samuele/Desktop/vue/programmable_matter/node_modules/eslint-loader/index.js??ref--14-0!/home/samuele/Desktop/vue/programmable_matter/src/scheduler.ts"],"names":[],"mappings":";;;;;AACA,OAAO,KAAP,MAAkB,SAAlB;AAEA,SAAS,yBAAT,QAA0C,SAA1C;AAEA,IAAM,KAAK,GAAG,GAAd;;AAEA,IAAM,kBAAkB,GAAG,SAArB,kBAAqB;AAAA,SACzB,KAAK,CAAC,OAAN,CAAc,oBADW;AAAA,CAA3B,C,CAEA;AACA;AACA;AACA;;;AAEA,IAAM,aAAa,GAAG,SAAhB,aAAgB,CAAC,QAAD,EAA0C;AAC9D,MAAM,aAAa,GAAG,KAAK,CAAC,OAAN,CAAc,QAAd,CACpB,QAAQ,CAAC,UADW,EAEpB,QAAQ,CAAC,UAFW,CAAtB;;AAIA,8BACE,KAAK,CAAC,OAAN,CAAc,wBAAd,CAAuC,aAAvC,CADF;AAAA,MAAQ,oBAAR,yBAAQ,oBAAR;AAAA,MAA8B,QAA9B,yBAA8B,QAA9B;;AAMA,SAAO,wBAAwB,CAAC,oBAAD,EAAuB,QAAvB,CAA/B;AACD,CAZD;;AAcA,IAAM,wBAAwB,GAAG,SAA3B,wBAA2B,CAC/B,QAD+B,EAE/B,eAF+B,EAGX;AACpB,MAAI,SAAS,GAAG,KAAK,CAAC,KAAN,CAAY,SAA5B;AACA,MAAI,WAAJ;;AAEA,MAAI,SAAS,KAAK,GAAlB,EAAuB;AACrB,IAAA,SAAS,GAAG,eAAe,GAAG,GAAH,GAAS,GAApC;AACD;;AAED,MAAI,QAAQ,CAAC,MAAT,IAAmB,CAAnB,IAAwB,QAAQ,CAAC,MAAT,KAAoB,CAAhD,EAAmD;AACjD,WAAO,IAAP;AACD;;AACD,MAAI,QAAQ,CAAC,MAAT,KAAoB,CAApB,IAAyB,SAAS,KAAK,GAA3C,EAAgD;AAC9C,IAAA,WAAW,GAAG,IAAI,CAAC,MAAL,KAAgB,GAAhB,GAAsB,CAAtB,GAA0B,CAAxC;AACD,GAFD,MAEO;AACL,IAAA,WAAW,GAAG,IAAI,CAAC,KAAL,CAAW,QAAQ,CAAC,MAAT,GAAkB,CAA7B,CAAd;AACD;;AAED,SAAO,QAAQ,CAAC,WAAD,CAAf;AACD,CArBD;;AAuBA,IAAM,QAAQ,GAAG,SAAX,QAAW,CAAC,QAAD,EAA8B;AAC7C,MAAM,MAAM,GAAG,KAAK,CAAC,OAAN,CAAc,iBAAd,CAAgC,QAAQ,CAAC,EAAzC,CAAf;;AACA,MAAI,MAAM,IAAI,KAAK,CAAC,OAAN,CAAc,eAAd,CAA8B,MAA9B,CAAd,EAAqD;AACnD,IAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC;AACnC,MAAA,EAAE,EAAE,QAAQ,CAAC;AADsB,KAArC;AAGD,GAJD,MAIO;AACL,QAAM,OAAM,GAAG,aAAa,CAAC,QAAD,CAA5B;;AACA,QAAI,OAAJ,EAAY;AACV,MAAA,KAAK,CAAC,MAAN,CAAa,sBAAb,EAAqC;AACnC,QAAA,EAAE,EAAE,QAAQ,CAAC,EADsB;AAEnC,QAAA,MAAM,EAAN;AAFmC,OAArC;AAID;AACF;AACF,CAfD;;AAiBA,OAAO,IAAM,GAAG,GAAG,SAAN,GAAM,GAAW;AAC5B,EAAA,KAAK,CAAC,QAAN,CAAe,cAAf;AACA,EAAA,KAAK,CAAC,QAAN,CACE,wBADF,EAEE,yBAAyB,CAAC,KAAK,CAAC,OAAN,CAAc,aAAf,CAF3B;AAIA,EAAA,OAAO,CAAC,GAAR,CAAY,gBAAZ,EAA8B,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAiB,CAAjB,CAA9B;AAEA,MAAI,MAAM,GAAG,CAAb;AACA,MAAI,KAAK,GAAG,CAAZ,CAT4B,CAU5B;;AACA,MAAM,MAAM,GAAG,WAAW,CAAC,YAAK;AAC9B,QAAM,eAAe,GAAG,kBAAkB,EAA1C;AAEA,IAAA,KAAK,IAAI,eAAe,CAAC,MAAzB;AACA,IAAA,MAAM;AAEN,IAAA,eAAe,CAAC,OAAhB,CAAwB,UAAC,CAAD;AAAA,aAAO,QAAQ,CAAC,CAAD,CAAf;AAAA,KAAxB;;AAEA,QACE,KAAK,CAAC,OAAN,CAAc,oBAAd,CAAmC,KAAnC,CACE,UAAC,CAAD;AAAA,aACE,KAAK,CAAC,OAAN,CAAc,eAAd,CACE,KAAK,CAAC,OAAN,CAAc,QAAd,CAAuB,CAAC,CAAC,UAAzB,EAAqC,CAAC,CAAC,UAAvC,CADF,KAEK,KAAK,CAAC,OAAN,CAAc,gBAAd,CAA+B,CAA/B,MAAsC,YAH7C;AAAA,KADF,CADF,EAOE;AACA,kCACE,yBAAyB,CAAC,KAAK,CAAC,OAAN,CAAc,aAAf,CAD3B;AAAA,UAAiB,YAAjB,yBAAQ,OAAR;AAAA,UAAyC,aAAzC,yBAA+B,QAA/B;;AAGA,MAAA,KAAK,CAAC,QAAN,CAAe,wBAAf,EAAyC;AACvC,QAAA,YAAY,EAAZ,YADuC;AAEvC,QAAA,aAAa,EAAb,aAFuC;AAGvC,QAAA,KAAK,EAAL,KAHuC;AAIvC,QAAA,MAAM,EAAN,MAJuC;AAKvC,QAAA,UAAU,EAAE;AAL2B,OAAzC;AAOA,MAAA,OAAO,CAAC,GAAR,CAAY,cAAZ,EAA4B,KAAK,CAAC,KAAN,CAAY,IAAZ,CAAiB,CAAjB,CAA5B;AACD;AACF,GA5ByB,EA4BvB,KA5BuB,CAA1B;AA6BD,CAxCM;;AA0CP,IAAM,aAAa,GAAG,SAAhB,aAAgB,GAA4C;AAChE;AACA,SAAO;AAAE,IAAA,QAAQ,EAAE,CAAZ;AAAe,IAAA,OAAO,EAAE;AAAxB,GAAP;AACD,CAHD","sourcesContent":["import { GridPoint, IParticle } from './interfaces';\nimport store from './store';\nimport { sampleSize } from 'lodash';\nimport { getGridDensityAndDiameter } from './stats';\n\nconst DELAY = 100;\n\nconst getActiveParticles = (): IParticle[] =>\n  store.getters.nonObstacleParticles;\n// sampleSize(\n//   store.getters.nonObstacleParticles,\n//   Math.floor(Math.random() * (store.state.particles.length - 1) + 1)\n// );\n\nconst getNextTarget = (particle: IParticle): GridPoint | null => {\n  const particlePoint = store.getters.getPoint(\n    particle.currentRow,\n    particle.currentCol\n  );\n  const { freeNeighborInterval, obstacle } =\n    store.getters.getFreeNeighborsInterval(particlePoint) as {\n      freeNeighborInterval: GridPoint[];\n      obstacle: boolean;\n    };\n\n  return selectTargetFromInterval(freeNeighborInterval, obstacle);\n};\n\nconst selectTargetFromInterval = (\n  interval: GridPoint[],\n  thereIsObstacle: boolean\n): GridPoint | null => {\n  let algorithm = store.state.algorithm;\n  let targetIndex;\n\n  if (algorithm === 'c') {\n    algorithm = thereIsObstacle ? 'b' : 'a';\n  }\n\n  if (interval.length <= 2 || interval.length === 6) {\n    return null;\n  }\n  if (interval.length === 5 && algorithm === 'b') {\n    targetIndex = Math.random() > 0.5 ? 1 : 3;\n  } else {\n    targetIndex = Math.floor(interval.length / 2);\n  }\n\n  return interval[targetIndex];\n};\n\nconst makeMove = (particle: IParticle): void => {\n  const target = store.getters.getParticleTarget(particle.id);\n  if (target && store.getters.isGridPointFree(target)) {\n    store.commit('moveParticleToTarget', {\n      id: particle.id,\n    });\n  } else {\n    const target = getNextTarget(particle);\n    if (target) {\n      store.commit('updateParticleTarget', {\n        id: particle.id,\n        target,\n      });\n    }\n  }\n};\n\nexport const run = (): void => {\n  store.dispatch('addLogRecord');\n  store.dispatch(\n    'updateCurrentLogRecord',\n    getGridDensityAndDiameter(store.getters.populatedGrid)\n  );\n  console.log('initial record', store.state.logs[0]);\n\n  let rounds = 0;\n  let moves = 0;\n  // eslint-disable-next-line no-constant-condition\n  const handle = setInterval(() => {\n    const activeParticles = getActiveParticles();\n\n    moves += activeParticles.length;\n    rounds++;\n\n    activeParticles.forEach((p) => makeMove(p));\n\n    if (\n      store.getters.nonObstacleParticles.every(\n        (p: IParticle) =>\n          store.getters.isPointIsolated(\n            store.getters.getPoint(p.currentRow, p.currentCol)\n          ) && store.getters.getParticleState(p) === 'contracted'\n      )\n    ) {\n      const { density: finalDensity, diameter: finalDiameter } =\n        getGridDensityAndDiameter(store.getters.populatedGrid);\n\n      store.dispatch('updateCurrentLogRecord', {\n        finalDensity,\n        finalDiameter,\n        moves,\n        rounds,\n        successful: true,\n      });\n      console.log('final record', store.state.logs[0]);\n    }\n  }, DELAY);\n};\n\nconst getStatistics = (): { diameter: number; density: number } => {\n  // TODO implement\n  return { diameter: 0, density: 0 };\n};\n"],"sourceRoot":""}]}